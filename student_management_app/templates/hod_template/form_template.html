{% load static %}

<form method="POST" action="{% url 'add_student_save' %}" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="row">
        <div class="col-12">
            <div class="form-group">
                {% if messages %}
                    {% for message in messages %}
                        {% if message.tags == 'error' %}
                        <div class="alert alert-danger alert-dismissible fade show" role="alert">
                            <strong>Error!</strong> {{ message }}
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        {% elif message.tags == 'success' %}
                        <div class="alert alert-success alert-dismissible fade show" role="alert">
                            <strong>Success!</strong> {{ message }}
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        {% endif %}
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>

    <div class="row mb-3">
        <div class="col-md-6">
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" class="form-control" name="email" id="email" placeholder="Email" value="{% if form.email.value %}{{ form.email.value }}{% endif %}" required>
                <div class="invalid-feedback">
                    {% if form.email.errors %}
                        {% for error in form.email.errors %}
                            {{ error }}
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" class="form-control" name="password" id="password" placeholder="Password" value="{% if form.password.value %}{{ form.password.value }}{% endif %}" required>
                <div class="invalid-feedback">
                    {% if form.password.errors %}
                        {% for error in form.password.errors %}
                            {{ error }}
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="row mb-3">
        <div class="col-md-6">
            <div class="form-group">
                <label for="first_name">First Name</label>
                <input type="text" class="form-control" name="first_name" id="first_name" placeholder="First Name" value="{% if form.first_name.value %}{{ form.first_name.value }}{% endif %}" required>
                <div class="invalid-feedback">
                    {% if form.first_name.errors %}
                        {% for error in form.first_name.errors %}
                            {{ error }}
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="form-group">
                <label for="last_name">Last Name</label>
                <input type="text" class="form-control" name="last_name" id="last_name" placeholder="Last Name" value="{% if form.last_name.value %}{{ form.last_name.value }}{% endif %}" required>
                <div class="invalid-feedback">
                    {% if form.last_name.errors %}
                        {% for error in form.last_name.errors %}
                            {{ error }}
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="row mb-3">
        <div class="col-md-6">
            <div class="form-group">
                <label for="username">Username</label>
                <input type="text" class="form-control" name="username" id="username" placeholder="Username" value="{% if form.username.value %}{{ form.username.value }}{% endif %}" required>
                <div class="invalid-feedback">
                    {% if form.username.errors %}
                        {% for error in form.username.errors %}
                            {{ error }}
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="form-group">
                <label for="address">Address</label>
                <textarea class="form-control" name="address" id="address" placeholder="Address">{% if form.address.value %}{{ form.address.value }}{% endif %}</textarea>
                <div class="invalid-feedback">
                    {% if form.address.errors %}
                        {% for error in form.address.errors %}
                            {{ error }}
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="row mb-3">
        <div class="col-md-6">
            <div class="form-group">
                <label for="course_id">Course</label>
                <select class="form-control" name="course_id" id="course_id" required>
                    <option value="">Select Course</option>
                    {% for course in form.fields.course_id.choices %}
                        <option value="{{ course.0 }}" {% if form.course_id.value == course.0 %}selected{% endif %}>{{ course.1 }}</option>
                    {% endfor %}
                </select>
                <div class="invalid-feedback">
                    {% if form.course_id.errors %}
                        {% for error in form.course_id.errors %}
                            {{ error }}
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="form-group">
                <label for="gender">Gender</label>
                <select class="form-control" name="gender" id="gender" required>
                    <option value="">Select Gender</option>
                    <option value="Male" {% if form.gender.value == 'Male' %}selected{% endif %}>Male</option>
                    <option value="Female" {% if form.gender.value == 'Female' %}selected{% endif %}>Female</option>
                    <option value="Other" {% if form.gender.value == 'Other' %}selected{% endif %}>Other</option>
                </select>
                <div class="invalid-feedback">
                    {% if form.gender.errors %}
                        {% for error in form.gender.errors %}
                            {{ error }}
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="row mb-3">
        <div class="col-md-6">
            <div class="form-group">
                <label for="session_year_id">Session Year</label>
                <select class="form-control" name="session_year_id" id="session_year_id" required>
                    <option value="">Select Session Year</option>
                    {% for session_year in form.fields.session_year_id.choices %}
                        <option value="{{ session_year.0 }}" {% if form.session_year_id.value == session_year.0 %}selected{% endif %}>{{ session_year.1 }}</option>
                    {% endfor %}
                </select>
                <div class="invalid-feedback">
                    {% if form.session_year_id.errors %}
                        {% for error in form.session_year_id.errors %}
                            {{ error }}
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="form-group">
                <label for="profile_pic">Profile Picture</label>
                <input type="file" class="form-control-file" name="profile_pic" id="profile_pic">
                <div class="invalid-feedback">
                    {% if form.profile_pic.errors %}
                        {% for error in form.profile_pic.errors %}
                            {{ error }}
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <button type="submit" class="btn btn-primary">Add Student</button>
        </div>
    </div>
</form>

<style>
.form-control {
    border-radius: 0.25rem;
    border: 1px solid #ced4da;
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.form-control:focus {
    border-color: #80bdff;
    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
}

.invalid-feedback {
    display: block;
    color: #dc3545;
}

.form-group label {
    font-weight: 500;
    margin-bottom: 0.5rem;
}

.btn-primary {
    color: #fff;
    background-color: #007bff;
    border-color: #007bff;
    padding: 0.375rem 0.75rem;
    font-size: 1rem;
    border-radius: 0.25rem;
    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.btn-primary:hover {
    color: #fff;
    background-color: #0069d9;
    border-color: #0062cc;
}

.alert {
    position: relative;
    padding: 0.75rem 1.25rem;
    margin-bottom: 1rem;
    border: 1px solid transparent;
    border-radius: 0.25rem;
}

.alert-danger {
    color: #721c24;
    background-color: #f8d7da;
    border-color: #f5c6cb;
}

.alert-success {
    color: #155724;
    background-color: #d4edda;
    border-color: #c3e6cb;
}
</style>
